---
sidebar: sidebar 
permalink: rp-use-recover.html 
keywords: ransomware protection recovery, recover from a ransomware attack, recovery point, RPA 
summary: '攻撃後、 NetApp Ransomware Resilience はセカンダリ ストレージ上のバックアップ データがクリーンであることを確認し、実際の復旧ポイント (RPA) を推奨し、クラッシュ耐性のある復旧のためのワークフローを調整します。' 
---
= NetApp Ransomware Resilience でランサムウェア攻撃から回復 (インシデントが中和された後)
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
ワークロードが「復元が必要」とマークされた後、 NetApp Ransomware Resilience は実際のリカバリポイント (RPA) を推奨し、クラッシュ耐性のあるリカバリのワークフローを調整します。

* アプリケーションまたは VM がSnapCenterによって管理されている場合、Ransomware Resilience は、アプリケーション整合性または VM 整合性プロセスを使用して、アプリケーションまたは VM を以前の状態と最後のトランザクションに復元します。アプリケーションまたは VM の整合性のある復元では、キャッシュまたは I/O 操作内のデータなど、ストレージに格納されなかったデータがボリューム内のデータに追加されます。
* アプリケーションまたは VM がSnapCenterによって管理されておらず、 NetApp Backup and Recovery または Ransomware Resilience によって管理されている場合、Ransomware Resilience はクラッシュ整合性復元を実行します。つまり、たとえばシステムがクラッシュした場合、同じ時点でボリューム内にあったすべてのデータが復元されます。
+
すべてのボリューム、特定のボリューム、または特定のファイルを選択してワークロードを復元できます。




TIP: ワークロードの回復は実行中のワークロードに影響を及ぼす可能性があります。適切な関係者と連携して回復プロセスを調整する必要があります。

ワークロードの復元ステータスは次のいずれかになります。

* *復元が必要です*: ワークロードを復元する必要があります。
* *進行中*: 復元操作が現在進行中です。
* *復元済み*: ワークロードが復元されました。
* *失敗*: ワークロードの復元プロセスを完了できませんでした。




== 復元準備が整ったワークロードを表示する

「復元が必要」の回復ステータスにあるワークロードを確認します。

.手順
. 次のいずれかを実行します。
+
** ダッシュボードから、アラート ペインの「復元が必要」の合計を確認し、[すべて表示] を選択します。
** メニューから*回復*を選択します。


. *回復* ページでワークロード情報を確認します。
+
image:screen-recovery2.png["回復ページ"]





== SnapCenterによって管理されるワークロードを復元する

Ransomware Resilience を使用すると、ストレージ管理者は、推奨される復元ポイントまたは優先復元ポイントからワークロードを復元する最適な方法を決定できます。

復元が必要な場合、アプリケーションの状態は変更されます。バックアップに制御ファイルが含まれている場合、アプリケーションは制御ファイルから以前の状態に復元されます。復元が完了すると、アプリケーションは読み取り/書き込みモードで開きます。

*必要なコンソール ロール* このタスクを実行するには、組織管理者、フォルダーまたはプロジェクト管理者、またはランサムウェア耐性管理者のロールが必要です。link:https://docs.netapp.com/us-en/console-setup-admin/reference-iam-ransomware-roles.html["NetApp Consoleのランサムウェア耐性ロールについて学ぶ"^] 。

.手順
. ランサムウェア耐性から*回復*を選択します。
. *回復* ページでワークロード情報を確認します。
. 「復元が必要」状態にあるワークロードを選択します。
. 復元するには、[復元] を選択します。
. *復元範囲*: アプリケーション整合性 (または VM 用SnapCenterの場合、復元範囲は「VM ごと」)
. *ソース*: 詳細を表示するには、[ソース] の横にある下矢印を選択します。データを復元するために使用する復元ポイントを選択します。
+

TIP: ランサムウェア耐性は、インシデント発生直前の最新のバックアップを最適な復元ポイントとして識別し、「推奨」表示を表示します。

. *目的地*: 詳細を表示するには、目的地の横にある下矢印を選択します。
+
.. 元の場所または代替の場所を選択します。
.. システムを選択します。
.. ストレージ VM を選択します。


. 元の宛先にワークロードを復元するのに十分なスペースがない場合は、「一時ストレージ」行が表示されます。ワークロード データを復元するための一時ストレージを選択できます。復元されたデータは一時ストレージから元の場所にコピーされます。一時ストレージ行の*下矢印*をクリックし、宛先クラスター、ストレージ VM、およびローカル層を設定します。
. *保存*を選択します。
. *次へ*を選択します。
. 選択内容を確認します。
. *復元*を選択します。
. 上部のメニューから [*リカバリ*] を選択し、[リカバリ] ページでワークロードを確認します。ここでは、操作のステータスがさまざまな状態を遷移します。




== SnapCenterで管理されていないワークロードを復元する

Ransomware Resilience を使用すると、ストレージ管理者は、推奨される復元ポイントまたは優先復元ポイントからワークロードを復元する最適な方法を決定できます。

*必要なコンソール ロール* このタスクを実行するには、組織管理者、フォルダーまたはプロジェクト管理者、またはランサムウェア耐性管理者のロールが必要です。link:https://docs.netapp.com/us-en/console-setup-admin/reference-iam-ransomware-roles.html["NetApp Consoleのランサムウェア耐性ロールについて学ぶ"^] 。

セキュリティ ストレージ管理者は、さまざまなレベルでデータを回復できます。

* すべてのボリュームを回復
* ボリューム レベルまたはファイルとフォルダー レベルでアプリケーションを回復します。
* ボリューム レベル、ディレクトリ レベル、またはファイル/フォルダー レベルでファイル共有を回復します。
* VM レベルでデータストアから回復します。


プロセスはワークロードの種類によって異なります。

.手順
. ランサムウェア耐性メニューから、「回復」を選択します。
. *回復* ページでワークロード情報を確認します。
. 「復元が必要」状態にあるワークロードを選択します。
. 復元するには、[復元] を選択します。
. *復元範囲*: 実行する復元の種類を選択します。
+
** 全巻
** 量別
** ファイル別: 復元するフォルダーまたは単一のファイルを指定できます。
+

IMPORTANT: SAN ワークロードの場合、ワークロードごとにのみ復元できます。

+

TIP: 最大 100 個のファイルまたは 1 つのフォルダーを選択できます。



. アプリケーション、ボリューム、またはファイルのいずれを選択したかに応じて、次のいずれかの手順を続行します。




=== すべてのボリュームを復元する

. ランサムウェア耐性メニューから、「回復」を選択します。
. 「復元が必要」状態にあるワークロードを選択します。
. 復元するには、[復元] を選択します。
. [復元] ページの [復元範囲] で、[*すべてのボリューム*] を選択します。
+
image:screen-recovery-all-volumes.png["すべてのボリュームによる復元ページ"]

. *ソース*: 詳細を表示するには、[ソース] の横にある下矢印を選択します。
+
.. データを復元するために使用する復元ポイントを選択します。
+

TIP: ランサムウェア耐性は、インシデント発生直前の最新のバックアップを最適な復元ポイントとして識別し、「すべてのボリュームに対して最も安全」という表示を表示します。これは、最初に検出されたボリュームへの最初の攻撃の前に、すべてのボリュームがコピーに復元されることを意味します。



. *目的地*: 詳細を表示するには、目的地の横にある下矢印を選択します。
+
.. システムを選択します。
.. ストレージ VM を選択します。
.. 集計を選択します。
.. すべての新しいボリュームの先頭に追加されるボリューム プレフィックスを変更します。
+

TIP: 新しいボリューム名は、プレフィックス + 元のボリューム名 + バックアップ名 + バックアップ日付として表示されます。



. *保存*を選択します。
. *次へ*を選択します。
. 選択内容を確認します。
. *復元*を選択します。
. 上部のメニューから [*リカバリ*] を選択し、[リカバリ] ページでワークロードを確認します。ここでは、操作のステータスがさまざまな状態を遷移します。




=== ボリュームレベルでアプリケーションワークロードを復元する

. ランサムウェア耐性メニューから、「回復」を選択します。
. 「復元が必要」状態にあるアプリケーション ワークロードを選択します。
. 復元するには、[復元] を選択します。
. [復元] ページの [復元範囲] で、[*ボリューム別*] を選択します。
+
image:screen-recovery-byvolume.png["ボリュームごとの復元ページ"]

. ボリュームのリストで、復元するボリュームを選択します。
. *ソース*: 詳細を表示するには、[ソース] の横にある下矢印を選択します。
+
.. データを復元するために使用する復元ポイントを選択します。
+

TIP: ランサムウェア耐性は、インシデント発生直前の最新のバックアップを最適な復元ポイントとして識別し、「推奨」表示を表示します。



. *目的地*: 詳細を表示するには、目的地の横にある下矢印を選択します。
+
.. システムを選択します。
.. ストレージ VM を選択します。
.. 集計を選択します。
.. 新しいボリューム名を確認します。
+

TIP: 新しいボリューム名は、元のボリューム名 + バックアップ名 + バックアップ日付として表示されます。



. *保存*を選択します。
. *次へ*を選択します。
. 選択内容を確認します。
. *復元*を選択します。
. 上部のメニューから [*リカバリ*] を選択し、[リカバリ] ページでワークロードを確認します。ここでは、操作のステータスがさまざまな状態を遷移します。




=== ファイルレベルでアプリケーションのワークロードを復元する

アプリケーション ワークロードをファイル レベルで復元する前に、影響を受けるファイルの一覧を表示できます。影響を受けるファイルのリストをダウンロードするには、「アラート」ページにアクセスしてください。次に、「回復」ページを使用してリストをアップロードし、復元するファイルを選択します。

アプリケーション ワークロードをファイル レベルで同じシステムまたは別のシステムに復元できます。

.影響を受けるファイルのリストを取得する手順
影響を受けるファイルのリストを取得するには、「アラート」ページを使用します。


TIP: ボリュームに複数のアラートがある場合は、アラートごとに影響を受けるファイルの CSV リストをダウンロードする必要があります。

. ランサムウェア耐性メニューから、*アラート*を選択します。
. [アラート] ページで、結果をワークロード別に並べ替えて、復元するアプリケーション ワークロードのアラートを表示します。
. そのワークロードのアラートのリストから、アラートを選択します。
. そのアラートに対して、単一のインシデントを選択します。
+
image:screen-alerts-incidents-impacted-files.png["特定のアラートの影響を受けるファイルのリスト"]

. ファイルの完全なリストを表示するには、[影響を受けるファイル] ペインの上部にある [*ここをクリック*] を選択します。
. そのインシデントについては、ダウンロード アイコンを選択し、影響を受けるファイルのリストを CSV 形式でダウンロードします。


.これらのファイルを復元する手順
. ランサムウェア耐性メニューから、「回復」を選択します。
. 「復元が必要」状態にあるアプリケーション ワークロードを選択します。
. 復元するには、[復元] を選択します。
. [復元] ページの [復元範囲] で、[*ファイル別*] を選択します。
. ボリュームのリストで、復元するファイルが含まれているボリュームを選択します。
. *復元ポイント*: 詳細を表示するには、*復元ポイント*の横にある下矢印を選択します。データを復元するために使用する復元ポイントを選択します。
+

NOTE: [復元ポイント] ウィンドウの [理由] 列には、スナップショットまたはバックアップの理由が「スケジュール済み」または「ランサムウェア インシデントへの自動対応」として表示されます。

. *ファイル*:
+
** *ファイルを自動的に選択*: Ransomware Resilience によって復元するファイルが選択されます。
** *ファイルのリストアップロード*: アラート ページから取得した、または所有している影響を受けるファイルのリストを含む CSV ファイルをアップロードします。一度に最大 10,000 個のファイルを復元できます。
+
image:screen-recovery-app-by-file-upload-csv.png["アラートの影響を受けるファイルをリストしたCSVファイルをアップロードします"]

** *ファイルを手動で選択*: 復元するファイルまたはフォルダーを最大 10,000 個選択します。
+
image:screen-recovery-app-by-file-select-files.png["復元するファイルを手動で選択"]

+

NOTE: 選択した復元ポイントを使用してファイルを復元できない場合は、復元できないファイルの数を示すメッセージが表示され、[影響を受けるファイルのリストをダウンロード] を選択して、それらのファイルのリストをダウンロードできます。



. *目的地*: 詳細を表示するには、目的地の横にある下矢印を選択します。
+
.. データを復元する場所（元のソースの場所または指定できる別の場所）を選択します。
+

TIP: 元のファイルまたはディレクトリは復元されたデータによって上書きされますが、新しい名前を指定しない限り、元のファイルとフォルダの名前は同じままになります。

.. システムを選択します。
.. ストレージ VM を選択します。
.. 必要に応じて、パスを入力します。
+

TIP: 復元のパスを指定しない場合は、ファイルは最上位ディレクトリの新しいボリュームに復元されます。

.. 復元されたファイルまたはディレクトリの名前を現在の場所と同じ名前にするか、異なる名前にするかを選択します。


. *次へ*を選択します。
. 選択内容を確認します。
. *復元*を選択します。
. 上部のメニューから [*リカバリ*] を選択し、[リカバリ] ページでワークロードを確認します。ここでは、操作のステータスがさまざまな状態を遷移します。




=== ファイル共有またはデータストアを復元する

. 復元するファイル共有またはデータストアを選択した後、[復元] ページの [復元範囲] で [*ボリューム別*] を選択します。
+
image:screen-recovery-fileshare.png["ファイル共有の回復を示す回復ページ"]

. ボリュームのリストで、復元するボリュームを選択します。
. *ソース*: 詳細を表示するには、[ソース] の横にある下矢印を選択します。
+
.. データを復元するために使用する復元ポイントを選択します。
+

TIP: ランサムウェア耐性は、インシデント発生直前の最新のバックアップを最適な復元ポイントとして識別し、「推奨」表示を表示します。



. *目的地*: 詳細を表示するには、目的地の横にある下矢印を選択します。
+
.. データを復元する場所（元のソースの場所または指定できる別の場所）を選択します。
+

TIP: 元のファイルまたはディレクトリは復元されたデータによって上書きされますが、新しい名前を指定しない限り、元のファイルとフォルダの名前は同じままになります。

.. システムを選択します。
.. ストレージ VM を選択します。
.. 必要に応じて、パスを入力します。
+

TIP: 復元のパスを指定しない場合は、ファイルは最上位ディレクトリの新しいボリュームに復元されます。



. *保存*を選択します。
. 選択内容を確認します。
. *復元*を選択します。
. メニューから [*リカバリ*] を選択し、[リカバリ] ページでワークロードを確認します。ここで、操作のステータスがさまざまな状態を遷移します。




=== VM レベルで VM ファイル共有を復元する

復元する VM を選択した後、[回復] ページで次の手順を続行します。

. *ソース*: 詳細を表示するには、[ソース] の横にある下矢印を選択します。
+
image:screen-recovery-vm.png["復元中の VM を示すリカバリ ページ"]

. データを復元するために使用する復元ポイントを選択します。
. *目的地*: 元の場所へ。
. *次へ*を選択します。
. 選択内容を確認します。
. *復元*を選択します。
. メニューから [*リカバリ*] を選択し、[リカバリ] ページでワークロードを確認します。ここで、操作のステータスがさまざまな状態を遷移します。

